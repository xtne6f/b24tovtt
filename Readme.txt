b24tovtt - tsreadexのトレース出力のARIB字幕データをWebVTTに整形する

使用法:

b24tovtt [-l lang][-d delay][-c chapter][-s pattern][-e pattern] dest

-l lang, 1<=range<=8, default=1
  出力する字幕の言語。

-d delay (milliseconds), default=-300
  WebVTTキューのタイミングをずらす量。
  このオプションの既定値は音声ストリーム基準で処理するデコーダ(L-SMASH Worksなど)に最適化されている。
  映像が最初にデコードされる位置までの音声をカットすると思われるデコーダ(NVEncCなど)には-700ぐらいが適切。
  再生したとき字幕の表示が遅れるように感じる場合はより小さくする。

-c chapter, default=""
  出力をカット編集する場合、Nero/OGM形式のチャプターファイル名。
  文字コードはUTF-8やShift_JISなどの8bitベースで以下のような形式のもの:
  > CHAPTER01=00:00:00.000
  > CHAPTER01NAME=編集点開始
  > CHAPTER02=01:23:45.678
  > CHAPTER02NAME=編集点終了

-s pattern, default="^ix"
  出力をカット編集する場合、カット開始チャプター名のパターン。
  "^..." (前方一致)、"...$" (後方一致)、"^...$" (完全一致)、または部分一致。
  非ASCII文字を \x?? (??は16進数)でエスケープできる。
  大文字小文字は区別されない。
  たとえばチャプターファイルがShift_JISのとき、チャプター名が"開始"で終わるチャプターでカットしたいなら
  > -s '\x8A\x4A\x8E\x6E$'
  のようにする。

-e pattern, default="^ox"
  出力をカット編集する場合、カット終了チャプター名のパターン。
  "-s"オプションと同様。
  たとえばチャプターファイルがShift_JISのとき、チャプター名が"終了"で終わるチャプターまでカットしたいなら
  > -e '\x8F\x49\x97\xB9$'
  のようにする。

dest
  出力先のWebVTTファイル名、または"-"で標準出力。
  出力すべきWebVTTキューがない場合ファイルは生成されない。

説明:

このツールの標準入力にtsreadexのトレース機能の出力を与える。
> tsreadex -n -1 -r - foo.m2t | b24tovtt foo.vtt
するとトレースに含まれるエスケープされたARIB字幕データが、以下のようなWebVTTのボイスタグ風のキューとして出力される。
> 00:00:00.000 --> 00:00:02.345
> <v b24caption0>%80%00%00%3F%02%1Ajpn%84%3Aeng%84%={%=}</v>
> <v b24caption1>%84%00%00%3F%={%1F%20%={%0C%=}%=}</v>

その他:

ライセンスはMITとする。
